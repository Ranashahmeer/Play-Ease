<div class="approvals-container">
  <div class="approvals-header">
    <h2>Payment Approvals</h2>
    <p class="subtitle">Review and approve pending payment proofs</p>
    <button class="refresh-btn" (click)="loadPendingApprovals()" [disabled]="isLoading">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="23 4 23 10 17 10"></polyline>
        <polyline points="1 20 1 14 7 14"></polyline>
        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
      </svg>
      Refresh
    </button>
  </div>

  <div *ngIf="isLoading" class="loading-state">
    <p>Loading pending approvals...</p>
  </div>

  <div *ngIf="!isLoading && pendingApprovals.length === 0" class="empty-state">
    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <polyline points="20 6 9 17 4 12"></polyline>
    </svg>
    <p>No pending approvals</p>
    <small>All payments have been reviewed</small>
  </div>

  <div *ngIf="!isLoading && pendingApprovals.length > 0" class="approvals-list">
    <div *ngFor="let approval of pendingApprovals" class="approval-card">
      <div class="approval-header">
        <div class="approval-info">
          <h3>{{ approval.courtName }}</h3>
          <p class="booking-details">
            <span>üìÖ {{ approval.bookingDate }}</span>
            <span>‚è∞ {{ approval.startTime }} - {{ approval.endTime }}</span>
            <span class="price">üí∞ Rs {{ approval.price }}</span>
          </p>
        </div>
        <div class="time-remaining" [class.expired]="approval.timeRemaining === 'Expired'">
          {{ formatTimeRemaining(approval.timeRemaining) }}
        </div>
      </div>

      <div class="approval-body">
        <div class="user-info">
          <p><strong>User:</strong> {{ approval.userName }}</p>
          <p><strong>Phone:</strong> {{ approval.userPhone }}</p>
        </div>

        <div class="payment-proof" *ngIf="approval.paymentProof">
          <p><strong>Payment Proof:</strong></p>
          <img [src]="getPaymentProofUrl(approval.paymentProof)" alt="Payment proof" class="proof-image" />
        </div>
      </div>

      <div class="approval-actions">
        <dx-button 
          text="Approve Payment" 
          type="success"
          (onClick)="approvePayment(approval.bookingId)">
        </dx-button>
        <dx-button 
          text="Reject Payment" 
          type="danger"
          (onClick)="rejectPayment(approval.bookingId)">
        </dx-button>
      </div>
    </div>
  </div>
</div>

